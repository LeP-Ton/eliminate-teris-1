# 项目认知记录

## 2026-02-14
- 项目通过 `run.sh` 启动可执行程序，当前策略已改为“每次启动前强制重新编译”，避免启动到旧构建产物。
- `run.sh` 会优先使用 `/Applications/Xcode.app/Contents/Developer` 作为 `DEVELOPER_DIR`（若用户未手动设置）。
- 启动路径通过 `swift build --show-bin-path` 计算，避免手写架构目录导致路径偏差。
- 挑战记录标题区域已去掉模式/细分 Tag，仅保留标题文本，减少头部视觉干扰。
- 模式记录每个分桶的最大条数调整为 9，初始化时会对历史数据做排序与截断归一化。
- 挑战记录行内序号 Tag 通过 `baselineOffset` 与附件 bounds 微调，实现与分数/日期文本的中线对齐。
- 序号 Tag 当前按视觉反馈下移 3px（`attachment.bounds.y = -3`）以贴齐同一行文本。
- 测试 seed 数据采用“9条 + 0/1条混合”策略：竞分 1分钟=9、2分钟=1、3分钟=0；竞速 300分=9、600分=1、900分=0。
- 挑战记录行间距已缩减 50%，`paragraphStyle.lineSpacing` 从 `7` 调整为 `3.5`。
- 新增“玩法说明”模块，位于游戏设置与挑战记录下方，使用罗德岛风格红色主题边框，并按“基础规则/模式规则/结算规则”分类展示。
- 玩法说明会根据当前模式与规则档位动态变化（自由、竞分档位、竞速目标分），用于解释不同玩法规则。
- 玩法说明文案已改为精简版结构：仅展示“模式标题 + 模式规则 + 结算方式”，不再显示“模式规则/结算规则/当前模式”分段模块。
- 玩法说明已恢复“基础规则”，并把列表符号统一为 `•`；挑战记录在面板宽度变化时会重建排版，恢复“排名+得分/日期”两侧对齐。
- 游戏设置、时间与得分、挑战记录模块的标题与主要内容文本已统一切换为对应主题色（蓝/绿/橙），不再使用白色正文。
- 玩法说明在所有模式下都已去掉模式小标题；基础规则第二条统一为“操作方式：...”前缀并保持多语言同步。
